// when document has loaded, call the function to finish the loading
$(window).load(function() {
	$(".post-verification").removeClass('pre').addClass('after');
	$(".checkmark").removeClass('pre').addClass('after');
	loadcomplete();
}
);
function loadcomplete() {
	$(".post-verification").fadeOut(1000, 'swing');
	var menuHeight = $("div.body_wrapper").height();
	$(".adminbar-wrapper").css('height', menuHeight - '25');
}

$(window).resize(function() {
	var menuHeight = $("div.body_wrapper").height();
	$(".adminbar-wrapper").css('height', menuHeight - '25');
});

$(function() {
$('.menu-button').bind('click',function(event){
		if ($('.body_wrapper').hasClass("menu-open")) {
			$('.body_wrapper').removeClass("menu-open");
		}
		else {
			$('.body_wrapper').addClass("menu-open");
			var menuHeight = $("div.body_wrapper").height();
			$(".adminbar-wrapper").css('height', menuHeight - '25');
		}
    });
});

// counter for the statistics

$(function() {
    function count($this){
        var current = parseInt($this.html(), 10);
        $this.html(++current);
				if(current < $this.data('count') - 50){
            setTimeout(function(){count($this)}, 1);
        }
        else if(current < $this.data('count') - 15){
            setTimeout(function(){count($this)}, 10);
        }
				else if(current < $this.data('count') - 10){
            setTimeout(function(){count($this)}, 50);
        }
				else if(current < $this.data('count') - 5){
            setTimeout(function(){count($this)}, 100);
        }
				else if(current !== $this.data('count')){
            setTimeout(function(){count($this)}, 200);
        }
    }        
  $(".countervalue").each(function() {
      $(this).data('count', parseInt($(this).html(), 10));
      $(this).html('-1');
      count($(this));
  });
	
	var deleteLinks = document.querySelectorAll('.deletepost');

for (var i = 0; i < deleteLinks.length; i++) {
  deleteLinks[i].addEventListener('click', function(event) {
      event.preventDefault();

      var choice = confirm(this.getAttribute('data-confirm'));

      if (choice) {
        window.location.href = this.getAttribute('href');
      }
  });
}
});