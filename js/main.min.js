// Copyright Bram Korsten 2016
var projectWidth;
// when document has loaded, call the function to finish the loading
$(window).load(function() {
	// look if the initial menu needs to be added already (when the page has been scrolled already)
	var projectWidth = $(".project").width();
	var windowHeight =  $(window).height();
	$(".project").css('height', projectWidth);
	if ($( ".intro" ).hasClass( "small" ) === false)
		{
			$(".intro").css('height', windowHeight);
			if($(this).scrollTop() > $(window).height())
			{
				$('.follownav').addClass('fixed');
			}
		}
	else {
		if($(this).scrollTop() > 400)
			{
				$('.follownav').addClass('fixed');
			}
	}
	$(".post-verification").removeClass('pre').addClass('after');
	$(".checkmark").removeClass('pre').addClass('after');
  //window.setTimeout("loadcomplete()", 1000); //call fade in 1 second 
	loadcomplete();
	$("#shadow").fadeIn(500, "easeOutQuad");
	$(window).scroll( function(){
    
        /* Check the location of each desired element */
        $('.fadein').each( function(i){
            
            var bottom_of_object = $(this).offset().top + $(this).outerHeight();
            var bottom_of_window = $(window).scrollTop() + $(window).height();
            
            /* If the object is completely visible in the window, fade it it */
            if( bottom_of_window > bottom_of_object ){
                
                $(this).animate({'opacity':'1'},500);
                    
            }
            
        }); 
    
    });
	
}
);

// fadeout the loading screen
function loadcomplete() {
  $(".loading").fadeOut('slow');
	$(".title h1").addClass('rainbow');
	$(".post-verification").fadeOut(1000, 'swing');
}

// check if the menu needs to be added by checking 
// if the page was scrolled more than the height of the screen
$(document).scroll(function(){
		if($(this).scrollTop() > 60)
			{
				$('.menu_bar').addClass('hidden');
			}
		if($(this).scrollTop() <= 60)
			{
				$('.menu_bar').removeClass('hidden');
			}
	if ($( ".intro" ).hasClass( "small" ) === false) {
		if($(this).scrollTop() > $(window).height())
			{
				$('.menu_bar').addClass('fixed');
			}
		else if($(this).scrollTop() <= 1) {
			$('.menu_bar').removeClass('fixed');
			
		}
	}
	else {
		if($(this).scrollTop() > 400)
			{
				$('.menu_bar').addClass('fixed');
			}
		else if($(this).scrollTop() <= 1) {
			$('.menu_bar').removeClass('fixed');
			
		}
	}
    
	});

$( window ).resize(function() {
	var projectWidth = $(".project").width();
	$(".project").css('height', projectWidth);
});

// expand the statistics when the button was clicked
$(function() {
$('.expander').bind('click',function(event){
        var $anchor = $(this);
		if ($('.extrastats').attr("name") == "hidden") {
			$('.extrastats').attr('name', 'visible');
		}
		else {
			$('.extrastats').attr('name', 'hidden');
		}
    });
});

// play / pauze the video and set the control icon
$(function() {
	$('.playicon').bind('click',function(){
		$('.backgroundvideo').fadeIn();
		$('.title').fadeOut();
		$('.backgroundvideo').get(0).paused ? $('.backgroundvideo').get(0).play() : $('.backgroundvideo').get(0).pause();
		$('.backgroundvideo').get(0).paused ? $('.playicon i').removeClass('fa-pause').addClass('fa-play') : $('.playicon i').removeClass('fa-play').addClass('fa-pause');
	});
});

// change the volume
function changeVolume(newVolume) {
	var volume = newVolume;
	var vid = document.getElementById("vidbackground");
	vid.volume = volume;
}

// play audio
$(function() {
	$( ".audiomelonecontrol" ).mouseenter(function() {
  	$('#audiomelone').get(0).play();
	});
});

// counter for the statistics

$(function() {
    function count($this){
        var current = parseInt($this.html(), 10);
        $this.html(++current);
				if(current < $this.data('count') - 50){
            setTimeout(function(){count($this)}, 1);
        }
        else if(current < $this.data('count') - 15){
            setTimeout(function(){count($this)}, 10);
        }
				else if(current < $this.data('count') - 10){
            setTimeout(function(){count($this)}, 50);
        }
				else if(current < $this.data('count') - 5){
            setTimeout(function(){count($this)}, 100);
        }
				else if(current !== $this.data('count')){
            setTimeout(function(){count($this)}, 200);
        }
    }        
  $(".countervalue").each(function() {
      $(this).data('count', parseInt($(this).html(), 10));
      $(this).html('-1');
      count($(this));
  });
	
	var deleteLinks = document.querySelectorAll('.deletepost');

for (var i = 0; i < deleteLinks.length; i++) {
  deleteLinks[i].addEventListener('click', function(event) {
      event.preventDefault();

      var choice = confirm(this.getAttribute('data-confirm'));

      if (choice) {
        window.location.href = this.getAttribute('href');
      }
  });
}
});